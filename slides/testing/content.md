### Test는 필요한가?

-----

### Test는 <strong>정말</strong> 필요한가?

-----

## 왜 테스트가 필요할까요?

-----

## 사례 A
<em>경력 10년차 프로젝트 구성원</em>이 코드를 수정했다.

이를 믿을 수 있나?

-----

## 사례 B
<strong>새롭게</strong> 투입된 <strong>경력 10년차</strong> 개발자가 코드를 수정했다.

이를 믿을 수 있나?

-----

### <em>사람</em> 프로세스를 통해 검증
QA나 개발자가 직접적으로 변경 부분에 대해 side-effect를 실제 테스트하여 확인한다.

-----

### 리소스가 많이 든다.

### <!-- .element: class="fragment" --> <em>QA 담당자의 역량</em>에 의해 테스트 검증 여부가 결정된다.

-----

<em>새로운 경력 1년차</em> 개발자가 코드를 수정했다.

<em>신입 프로젝트 구성원</em>이 코드를 수정했다.

### 이를 믿을수 있나? <!-- .element: class="fragment" -->

-----

## 테스트 코드만 있다면
## <!-- .element: class="fragment" --> <strong>믿을수 있습니다.</strong>

-----

### 테스트의 장점
  - 빠른 피드백 : 개발과 테스트 사이의 사이클을 줄 일 수 있다.
   다양한 입력,출력 환경 구성 후, 재 테스트 해야하는 비용 절감.
  - 회기 테스트 : 코드 변경시, 기존 로직을 확인해야 하는 비용 절감.
  - 코드의 개선 : 테스트 코드 작성을 통한 코드의 개선 및 사전 버그 찾음.

-----

이런 장점이 있음에도 왜? 우리는 테스트 코드를 만들어 내지 못하고 있는가?

-----

문제는 단연코 시간!

서비스 일정은 정해졌지만, 스펙은 계속 늘어나고,
늘어나기만 하면 괜찮지만, 다 바꾸기까지하죠.

-----

"테스트 코드는 산출물이 아닌 하나의 서비스 이다." 라는 인식의 변화.
프로세스의 변화가 필요

-----

### 프로세스의 변화가 필요.
- 개발 일정 : 설계 + 구현 + 테스트 코드 작성 => 자동화된 테스트 코드 수행 후 머지.
- 테스트 코드
  : 유지보수를 위해 읽기가 쉬워야한다.
  : 리팩토링이 필요하다.
  : ...

-----

우선 이러한 마음의 자세가 되었다면 좀더 자세히 이야기해보자.

-----

테스트에 대해 잠깐 살펴보자.

-----

### 테스트의 분류.
(테스트의 대상에 따라)
https://www.sitepoint.com/javascript-testing-unit-functional-integration/
- 단위테스트 (unit) :
- 시나리오 테스트 (function )
- 통합테스트

-----

모든 상황에서 테스트 코드를 작성해야하는가?

-----

테스트 코드가 많아진다.
== 소스의 코드가 많아진다.
== 변경시 비용이 많이 든다.

-----

- 중요 로직 (결산과 관련된 부분)
- 전체 큰틀이 변경되지 않는 코드 : 솔루션
   - 서비스는 오히려 독이 될수 있음.
   - 하지만, 서비스에서 변경되지 않는 핵심 로직에 대해서는 테스트가 이익이 될 수 도 있음.
- 자주 변경되는 부분은 테스트를 만들게 되면 오히려 독이 될수 있다.

-----

테스트 코드는 어떻게 짜야하나?

-----

좋은 테스트의 조건
 - 하나의 테스트는 한가지 기능에 충실한 테스트
 - A 테스트는 B 테스트에 영향을 미치면 안된다. 독립된 테스트
   => 테스트 전과 후의 상태가 변경되면 안된다.
 - 테스트는 여러번 수행해도 같은 결과를 출력해야한다.
 - 읽기 쉬운 테스트가 유지보수도 쉽다.

-----

테스트는 어떻게 작성하는가?

-----

(테스트 구현 스타일에 따라.)
1. 애자일 방법론에서는 테스트를 먼저 짜고, 개발을 해라. (X-Driven Development)
http://blog.aliencube.org/ko/2014/04/02/differences-between-bdd-and-tdd/
- TDD : 테스트 자체에 집중
- BDD : TDD와 동일. 비즈니스 요구사항에 집중 (좀더 자연어에 걸맞게)
크게 다르지 않다. 말의 차이
</section>
<section>
TDD는 요렇게
BDD는 요렇게한다.
</section>
<section>
2. Given/When/Then으로 구성
	- 테스트 시나리오를 작성
	- 코드로 옮김

-----

테스트 코드 작성 방법

-----

테스트시 제어하기 힘든 상황이 존재
- 시간 (time)
- 임의성 (Randomness)
- 동시성 (concurrency)
- 영속성 (Persistency)
- 네트워킹 (Networking)
- ...

제어가 불가능한 요소는 종속성을 제거

-----

테스트 기법

-----

1. 환경의 제어
  - 모듈과 주입기법
function(global) {

})(window);

2. wrapping을 통한 재정의
 - settimeout 커스텀해보기.

-----

Front-End 테스트 환경 적용해보기

-----

- 테스트 프레임웍크 : mocha, jasmine, qunit
- assertion : chai, should, expect
- mockup : sinon
 - timer (timer wrapping)
 - XMLHttpRequest (XMLHttpReqeust wrapping)
- 테스트 러너 : karma
- 커버리지 : istanbul

-----

- E2E 테스트 () === 종단간 테스트 === UI테스트
selunium (http://www.seleniumhq.org/) Web Browser Automation
  - angular용 protractor
  - nightwatch.js
phantomjs [headless webkit]
  - casperjs

-----

